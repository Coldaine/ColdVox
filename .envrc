# Automatically activate Python venv and sync dependencies on cd
# Requires: direnv (https://direnv.net/)
# Install: sudo apt install direnv && echo 'eval "$(direnv hook bash)"' >> ~/.bashrc

# Create venv if it doesn't exist
if [[ ! -d .venv ]]; then
    echo "Creating .venv with uv..."
    uv venv .venv
fi

# Activate the venv
source .venv/bin/activate

# Ensure dependencies are synced
uv sync --quiet

# Set PYO3 to use this venv's Python
export PYO3_PYTHON="$(pwd)/.venv/bin/python"
