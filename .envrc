# Automatically configure ColdVox workspace when entering the directory.
# Opt-in: run `direnv allow` once to authorize. Remove `.coldvox-setup-complete`
# to force re-running setup.

set -e

use dotenv

if [[ ! -f .coldvox-setup-complete ]]; then
  echo "[direnv] ðŸ”§ Running ColdVox setup..."
  if command -v just >/dev/null 2>&1; then
    just setup-auto || exit 1
  else
    bash scripts/dev-setup.sh || exit 1
  fi
  touch .coldvox-setup-complete
fi

# Load local overrides if present
dotenv_if_exists .env

# Sensible defaults (can be overridden in .env)
export VOSK_MODEL_PATH="${VOSK_MODEL_PATH:-models/vosk-model-small-en-us-0.15}"
export RUST_LOG="${RUST_LOG:-info}"
