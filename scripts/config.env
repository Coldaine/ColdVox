#!/usr/bin/env bash
# Shared configuration values for ColdVox shell scripts.
# Scripts should source this file to obtain consistent defaults.

# Allow callers to override any value by pre-defining the environment variable.
# The form below keeps an existing value if set; otherwise it applies the default.

export VENDOR_DIR="${VENDOR_DIR:-vendor}"
export VOSK_VENDOR_DIR="${VOSK_VENDOR_DIR:-${VENDOR_DIR}/vosk}"
export VOSK_MODEL_VENDOR_DIR="${VOSK_MODEL_VENDOR_DIR:-${VOSK_VENDOR_DIR}/model}"
export VOSK_LIB_VENDOR_DIR="${VOSK_LIB_VENDOR_DIR:-${VOSK_VENDOR_DIR}/lib}"

export VOSK_MODEL_NAME="${VOSK_MODEL_NAME:-vosk-model-small-en-us-0.15}"
export VOSK_MODEL_ARCHIVE="${VOSK_MODEL_ARCHIVE:-${VOSK_MODEL_NAME}.zip}"
export VOSK_MODEL_URL="${VOSK_MODEL_URL:-https://alphacephei.com/vosk/models/${VOSK_MODEL_ARCHIVE}}"
export VOSK_MODEL_SHA256="${VOSK_MODEL_SHA256:-57919d20a3f03582a7a5b754353b3467847478b7d4b3ed2a3495b545448a44b9}"
export VOSK_MODEL_REPO_DIR="${VOSK_MODEL_REPO_DIR:-models/${VOSK_MODEL_NAME}}"
export VOSK_MODEL_REQUIRED_SUBDIRS="${VOSK_MODEL_REQUIRED_SUBDIRS:-am conf graph ivector}"
export VOSK_MODEL_CRITICAL_FILES="${VOSK_MODEL_CRITICAL_FILES:-am/final.mdl conf/mfcc.conf ivector/final.ie}"

export VOSK_LIB_VERSION="${VOSK_LIB_VERSION:-0.3.45}"
export VOSK_LIB_ARCH="${VOSK_LIB_ARCH:-x86_64}"
export VOSK_LIB_ARCHIVE="${VOSK_LIB_ARCHIVE:-vosk-linux-${VOSK_LIB_ARCH}-${VOSK_LIB_VERSION}.zip}"
export VOSK_LIB_URL="${VOSK_LIB_URL:-https://github.com/alphacep/vosk-api/releases/download/v${VOSK_LIB_VERSION}/${VOSK_LIB_ARCHIVE}}"
export VOSK_LIB_SHA256="${VOSK_LIB_SHA256:-bbdc8ed85c43979f6443142889770ea95cbfbc56cffb5c5dcd73afa875c5fbb2}"
export VOSK_LIB_EXTRACT_DIR="${VOSK_LIB_EXTRACT_DIR:-vosk-linux-${VOSK_LIB_ARCH}-${VOSK_LIB_VERSION}}"

export RUNNER_CACHE_DIR="${RUNNER_CACHE_DIR:-/home/coldaine/ActionRunnerCache/vosk}"
export RUNNER_CACHE_DIR_ALT="${RUNNER_CACHE_DIR_ALT:-/home/coldaine/ActionRunnerCache/vosk-models}"
export RUNNER_OPTIONAL_MODEL_NAME="${RUNNER_OPTIONAL_MODEL_NAME:-vosk-model-en-us-0.22}"

export GPU_MIN_VRAM_MIB="${GPU_MIN_VRAM_MIB:-12288}"

# Minimum expected size of the primary Vosk model (MB) used by integrity checks.
export COLDVOX_MIN_MODEL_SIZE_MB="${COLDVOX_MIN_MODEL_SIZE_MB:-40}"
